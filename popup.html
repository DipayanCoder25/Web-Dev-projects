<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup Chatbox</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            padding: 30px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .description {
            color: #555;
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .open-chat-btn {
            background-color: #4a6cf7;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
            box-shadow: 0 4px 15px rgba(74, 108, 247, 0.3);
        }

        .open-chat-btn:hover {
            background-color: #3a5ce5;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(74, 108, 247, 0.4);
        }

        .open-chat-btn:active {
            transform: translateY(-1px);
        }

        /* Chatbox Styles */
        .chatbox-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .chatbox {
            width: 350px;
            height: 500px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: translateY(20px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .chatbox.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .chatbox-header {
            background: linear-gradient(to right, #4a6cf7, #6a11cb);
            color: white;
            padding: 18px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbox-header h3 {
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .close-btn:hover {
            transform: scale(1.2);
        }

        .chatbox-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #f8f9fa;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            background-color: #e9ecef;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            color: #333;
        }

        .user-message {
            background-color: #4a6cf7;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .chatbox-footer {
            padding: 20px;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            transition: border 0.3s;
        }

        .message-input:focus {
            border-color: #4a6cf7;
        }

        .send-btn {
            background-color: #4a6cf7;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            background-color: #3a5ce5;
            transform: scale(1.05);
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            background-color: #e9ecef;
            padding: 12px 16px;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            color: #666;
            font-style: italic;
        }

        .typing-indicator.active {
            display: block;
        }

        .notification {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ff4757;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Instructions */
        .instructions {
            margin-top: 30px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 10px;
            text-align: left;
            max-width: 600px;
        }

        .instructions h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .instructions ul {
            padding-left: 20px;
            color: #555;
        }

        .instructions li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .chatbox-container {
                bottom: 20px;
                right: 20px;
                left: 20px;
            }
            
            .chatbox {
                width: 100%;
                height: 450px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-comment-dots"></i> Popup Chatbox</h1>
        <p class="description">
            Click the button below to open a interactive chatbox. You can send messages and receive automated replies. 
            The chatbox includes animations, typing indicators, and a responsive design that works on all devices.
        </p>
        
        <button class="open-chat-btn" id="openChatBtn">
            <i class="fas fa-comments"></i> Open Chat
        </button>
    </div>

    <div class="chatbox-container">
        <div class="chatbox" id="chatbox">
            <div class="chatbox-header">
                <h3><i class="fas fa-robot"></i> Support Assistant</h3>
                <button class="close-btn" id="closeChatBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbox-body" id="chatboxBody">
                <div class="message bot-message">
                    Hello! I'm your virtual assistant. How can I help you today?
                </div>
                <div class="message bot-message">
                    You can ask me about our services, pricing, or just say hello!
                </div>
                <div class="typing-indicator" id="typingIndicator">
                    Assistant is typing...
                </div>
            </div>
            <div class="chatbox-footer">
                <input type="text" class="message-input" id="messageInput" placeholder="Type your message here...">
                <button class="send-btn" id="sendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="instructions">
        <h3>How to use this chatbox:</h3>
        <ul>
            <li>Click the "Open Chat" button to open the chatbox</li>
            <li>Type your message in the input field and press Enter or click the send button</li>
            <li>The assistant will respond to your messages automatically</li>
            <li>Click the "X" button to close the chatbox</li>
            <li>Try typing: hello, help, pricing, services, or goodbye</li>
        </ul>
    </div>

    <script>
        // DOM Elements
        const openChatBtn = document.getElementById('openChatBtn');
        const closeChatBtn = document.getElementById('closeChatBtn');
        const chatbox = document.getElementById('chatbox');
        const chatboxBody = document.getElementById('chatboxBody');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const typingIndicator = document.getElementById('typingIndicator');
        
        // State variables
        let isOpen = false;
        let messageCount = 0;
        
        // Open chatbox
        openChatBtn.addEventListener('click', () => {
            chatbox.classList.add('active');
            isOpen = true;
            messageInput.focus();
            
            // Reset notification
            messageCount = 0;
            updateNotification();
        });
        
        // Close chatbox
        closeChatBtn.addEventListener('click', () => {
            chatbox.classList.remove('active');
            isOpen = false;
        });
        
        // Send message
        function sendMessage() {
            const messageText = messageInput.value.trim();
            
            if (messageText === '') return;
            
            // Add user message to chat
            addMessage(messageText, 'user');
            
            // Clear input
            messageInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate bot response after delay
            setTimeout(() => {
                // Hide typing indicator
                hideTypingIndicator();
                
                // Generate bot response
                const botResponse = generateBotResponse(messageText);
                addMessage(botResponse, 'bot');
                
                // Scroll to bottom
                scrollToBottom();
            }, 1000 + Math.random() * 1000);
        }
        
        // Send message on button click
        sendBtn.addEventListener('click', sendMessage);
        
        // Send message on Enter key
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Add message to chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'bot' ? 'bot-message' : 'user-message');
            messageDiv.textContent = text;
            
            chatboxBody.appendChild(messageDiv);
            scrollToBottom();
            
            // Increment message count if chatbox is closed
            if (sender === 'bot' && !isOpen) {
                messageCount++;
                updateNotification();
            }
        }
        
        // Show typing indicator
        function showTypingIndicator() {
            typingIndicator.classList.add('active');
            scrollToBottom();
        }
        
        // Hide typing indicator
        function hideTypingIndicator() {
            typingIndicator.classList.remove('active');
        }
        
        // Scroll to bottom of chat
        function scrollToBottom() {
            chatboxBody.scrollTop = chatboxBody.scrollHeight;
        }
        
        // Generate bot response based on user input
        function generateBotResponse(userMessage) {
            const lowerMsg = userMessage.toLowerCase();
            
            if (lowerMsg.includes('hello') || lowerMsg.includes('hi') || lowerMsg.includes('hey') || lowerMsg.includes("heey")) {
                return "Hello there! How can I assist you today?";
            } else if (lowerMsg.includes('how are you')) {
                return "I'm doing great, thanks for asking! I'm here to help you.";
            } else if (lowerMsg.includes('help')) {
                return "I can help you with information about our services, pricing, or answer general questions. What would you like to know?";
            } else if (lowerMsg.includes('price') || lowerMsg.includes('cost')) {
                return "Our pricing plans start at $29/month for basic features. We also have premium plans at $79/month. Would you like more details?";
            } else if (lowerMsg.includes('service') || lowerMsg.includes('feature')) {
                return "We offer web development, mobile app development, UI/UX design, and digital marketing services. Which area are you interested in?";
            } else if (lowerMsg.includes('contact') || lowerMsg.includes('email') || lowerMsg.includes('phone')) {
                return "You can contact us at support@example.com or call +1 (555) 123-4567 during business hours.";
            } else if (lowerMsg.includes('thank')) {
                return "You're welcome! Let me know if you need anything else.";
            } else if (lowerMsg.includes('bye') || lowerMsg.includes('goodbye')) {
                return "Goodbye! Have a great day. Don't hesitate to reach out if you have more questions.";
            } else {
                const randomResponses = [
                    "That's interesting! Can you tell me more?",
                    "I understand. How can I help with that?",
                    "Thanks for sharing! Is there anything specific you'd like to know?",
                    "I see. Let me know if you have any questions about our services.",
                    "Great point! Would you like me to provide more information on that topic?"
                ];
                return randomResponses[Math.floor(Math.random() * randomResponses.length)];
            }
        }
        
        // Update notification badge
        function updateNotification() {
            let notification = document.querySelector('.notification');
            
            if (messageCount > 0) {
                if (!notification) {
                    notification = document.createElement('div');
                    notification.className = 'notification';
                    openChatBtn.appendChild(notification);
                }
                notification.textContent = messageCount > 9 ? '9+' : messageCount;
            } else if (notification) {
                notification.remove();
            }
        }
        
        // Add some initial messages for demo
        window.addEventListener('DOMContentLoaded', () => {
            // Add a welcome message after a short delay
            setTimeout(() => {
                if (!isOpen) {
                    messageCount = 1;
                    updateNotification();
                }
            }, 3000);
        });
    </script>
</body>
</html>